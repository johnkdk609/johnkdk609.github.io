---
layout: post
title: 객체 지향 설계와 스프링
description: 스프링 핵심 원리 - 기본편
categories: Spring-SpringBoot
date: 2023-10-18 11:54:00 +0900
---
이번에는 객체 지향 설계와 스프링에 대해 알아보겠다.

## 스프링을 이야기할 때 왜 객체 지향 이야기가 나오는가?

* <b>스프링은 다음 기술로 다형성 + OCP, DIP를 가능하게 지원한다.</b>
    * <b>DI (Dependency Injection): 의존관계, 의존성 주입</b>
    * <b>DI 컨테이너 제공</b>

DI 컨테이너는 자바 객체들을 컨테이너 안에 넣어 놓고 이 안에서 의존 관계를 서로 연결해주고 주입해주는 기능을 제공한다.

이 기술들로 인해 <u>클라이언트 코드의 변경 없이 기능을 확장할 수 있게</u> 된다. 쉽게 부품을 교체하듯이 개발할 수 있게 되는 것이다.

<br>

스프링이 없던 시절을 생각해보자. 옛날 어떤 개발자가 좋은 객체 지향 개발을 하려고 OCP, DIP 원칙을 지키면서 개발을 해보니, 너무 할 일이 많았다. 지금 내가 개발하는 코드보다 OCP, DIP 원칙을 지키기 위해 만들어야 하는 것들이 더 많은 것이다. 배보다 배꼽이 더 크다. 그래서 프레임워크로 만들어 버렸다.

순수하게 자바로 OCP, DIP 원칙들을 지키면서 개발을 해보면, 결국 스프링 프레임워크를 만들게 된다. (더 정확히는 DI 컨테이너)

(DI 개념은 말로 설명해도 이해가 잘 안 되고, 코드로 짜봐야 필요성을 알게 된다.)

## 정리

지금까지 공부한 내용을 쭉 정리해보겠다.

* 모든 설계에 <b>역할과 구현을 분리</b>해야 한다.

자동차, 공연의 예를 떠올려보자.

애플리케이션 설계도 공연을 설계 하듯이 배역만 만들어두고, 배우는 언제든지 유연하게 변경할 수 있도록 만드는 것이 좋은 객체 지향 설계이다. 

이것을 가능하게 하려면 다형성, OCP, DIP 원칙을 다 지켜야 한다. 그렇게 하려면 무언가가 더 필요한데, 그게 바로 <u>스프링 컨테이너</u>이다.

* 이상적으로는 <b>모든 설계에 인터페이스를 부여</b>해야 한다.

만약 어떤 데이터베이스를 사용할지 아직 기술적으로 정해지지 않은 상황을 가졍해보자. RDB를 쓸지, NoSQL을 쓸지조차도 정해지지 않은 것이다. 그래도 다른 것으로 개발은 해야 한다. 이때 인터페이스만 정해놓으면 일단 개발이 가능하다. 인터페이스를 먼저 만들어 놓으면 하부 구현 기술들에 대한 선택을 최대한 미룰 수 있는 장점이 있는 것이다.

인터페이스를 먼저 설계하고 구현을 나중에 정하게 되면, 구현 기술이 바뀌더라도 나머지를 변경할 필요가 없다. 변경의 범위가 매우 작고 유연해진다는 장점이 있다.

## 실무적인 고민

* 인터페이스를 도입하면 <b>추상화라는 비용이 발생</b>한다.

이상적으로는 인터페이스를 도입하는 것이 좋지만, 인터페이스를 무분별하게 남발하면 추상화라는 비용이 발생한다. 이 비용은 성능에 대해 말하는 것은 아니다. 추상화가 되어 버리면 개발자가 코드를 한 번 더 열어봐야 한다. Runtime에 MemoryMemberRepository를 쓸지, JdbcMemberRepository를 쓸지 여러 개 중 하나가 선택될 수 있다. 이게 코드만 열면 인터페이스만 보인다. 구현 클래스가 무엇인지 보려면 한 번 더 들어가야 한다. 이런 식으로 코드가 추상화 됨으로써 오는 단점이 있다.

그래서 <u>장점이 단점을 넘어설 때 선택</u>을 해야 한다.

김영한 선생님은 기능을 확장할 가능성이 없다면, 구체 클래스를 직접 사용하고, 향후 꼭 필요할 때 리팩터링 해서 인터페이스를 도입하는 것도 좋은 방법이라고 하신다. 이런 것을 잘 고민하고 설계하는 것이 좋은 아키텍터들이 결정하는 것이다.
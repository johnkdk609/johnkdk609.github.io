---
layout: post
title: 변경 사항 확인하기 (log & diff)
description: 지옥에서 온 Git 섹션 1. 변경 사항 확인하기 (log & diff)
categories: Git
date: 2023-06-16 23:14:00 +0900
---
버전을 만들었을 때 버전을 만든 것의 효용에 대해 살펴볼 것이다.

첫 번째 효용은 차이점을 알 수 있고, 과거 어느 시점의 내용을 알 수 있다는 것이다. 두 번째 효용은 과거로 돌아갈 수 있다는 것이다.

gitfh2 디렉토리에 가서 ```git log```를 하면 다음과 같이 지금까지의 역사가 출력된다.

<img width="409" alt="image" src="https://github.com/johnkdk609/johnkdk609.github.io/assets/88493727/855538fd-5cda-484d-a3a7-a44fdbf64b50">

이제 'git log'라는 명령어에 여러 가지 옵션을 줘서 'git log'가 동작하는 방법을 바꿀 수 있다.

```git log -p```는 각각의 커밋과 커밋 사이에 소스 상의 차이점을 확인할 수 있다.

<img width="442" alt="image" src="https://github.com/johnkdk609/johnkdk609.github.io/assets/88493727/508018ff-68bf-4124-9005-a13e8427a302">

위 사진을 보면, 가장 최신 커밋 메시지인 "4"와 그 이전 커밋인 "3"과의 차이점을 확인할 수 있다. "4" 바로 아래에 '--- a/f1.txt'과 '+++ b/f1.txt'가 보인다. 더하기로 표시되어 있는 파일은 버전 "4"에서의 파일 내용을 가리킨다. 그리고 위쪽의 마이너스로 표현되어 있는 것은 버전 "3"에서의 f1.txt파일을 가리키는 것이다. 즉, 버전 "4"에서는 f1.txt의 내용이 'f1.txt : 4'인데, 버전 "3"에서는 내용이 'source : 2'였다는 것이다.

버전 "3" 바로 아래에 '--- /dev/null'이라는 것은 버전 "2"에서는 파일이 없었는데 버전 "3"에서는 파일이 있다는 뜻이다. 즉, 버전 "3"에서 f2.txt라는 파일이 추가되었다는 뜻이다. '+source : 2'는 버전 "3"이 만들어지면서 f2.txt라는 파일이 만들어졌고, 그 내용이 'source : 2'라는 뜻이다.

이번에는 ```git diff```라는 명령어를 사용해보겠다. 만약 현재 디렉토리에서 ```git log```를 입력하면, 각각의 커밋 아이디가 나타난다. 내용이 4인 커밋의 경우 커밋에 대한 고유한 주소인 '0ba1178517fa2faffe4ee8664d36ad3af98e9114'가 있는 것이다.

이때 디렉토리에서 ```git diff 6825cad2a3e11ee94fbfd2d400c043f28c1e17e4```로 가령 커밋 메시지가 3인 버전의 고유한 주소를 입력해보겠다.

<img width="408" alt="image" src="https://github.com/johnkdk609/johnkdk609.github.io/assets/88493727/033747dc-f3af-4f80-8074-cfe28d607e72">

그러면 위와 같이 해당 커밋 이전의 메세지만 보인다. 여기서 만약 특정 커밋과 커밋 사이의 차이점을 확인하고 싶으면 다음과 같이 하면 된다.

가령 커밋 메세지가 3인 버전과 커밋 메세지가 1인 버전을 비교하고자 한다면, ```git diff 6825cad2a3e11ee94fbfd2d400c043f28c1e17e4..43175ac7475a28d473ef8c8cf2206c7760a2e2bf```를 입력하면 된다.

그러면 다음과 같은 화면이 나타난다.

<img width="281" alt="image" src="https://github.com/johnkdk609/johnkdk609.github.io/assets/88493727/d4a261c4-247d-4d97-a28e-7f6646d88893">

이때 아래쪽의 '--- a/f2.txt'는 앞쪽에서 언급했던 커밋 아이디(6825cad2a3e11ee94fbfd2d400c043f28c1e17e4)에서는 f2.txt는 존재하지만, 뒤쪽에서 언급했던 커밋 아이디(43175ac7475a28d473ef8c8cf2206c7760a2e2bf)에서는 '+++ /dev/null'로 존재하지 않는다고 되어 있다. 또, 마이너스로 표시되어 있는 f2.txt의 내용은 'source : 2'라고 표현되어 있다.

결국 ```git log -p```와 ```git diff 커밋아이디1..커밋아이디2```를 통해서 버전과 버전 사이의 소스 코드 상의 차이점을 알 수 있는 것이다.

만약 여기서 ```vim f1.txt```를 해서 f1.txt의 내용을 'f1.txt : 5'라고 변경하고 저장한 다음, ```git diff```를 입력하면 다음과 같은 화면이 나타난다.

<img width="270" alt="image" src="https://github.com/johnkdk609/johnkdk609.github.io/assets/88493727/ae217bf8-f91a-4dfd-9856-7ddd6ef3fa22">

수정한 파일의 내용은 5이고, 그 전에는 4였다는 것이 보인다. 이렇게 내가 지금 어떠한 작업을 했는지 확인할 수 있다. 커밋을 하기 전에 자기가 작업한 내용이 문제가 있는지 없는지를 마지막으로 리뷰할 기회를 주는 것이다. 실제로 작업을 하다 보면, 커밋을 하기 전까지 오랜 시간이 지나게 되고 이전에 무슨 일을 했는지 기억이 잘 안 날 수 있다. 이렇게 커밋을 하기 전에 ```git diff```를 입력하여 여태까지 내가 무엇을 했는지 파악할 수 있다.

```git add f1.txt```를 하고 ```git diff```를 입력하면, 아무것도 화면에 보이지 않는다.

---
layout: post
title: 라우팅 &#35;2. 라우팅 테이블
categories: Network
description: CS 지식의 정석 - 디자인패턴 네트워크 운영체제 데이터베이스 자료구조
date: 2025-03-26 19:03:00 +0900
---
이번에는 라우팅 테이블(Routing Table)에 대해서 알아보겠다. 앞서 "라우터는 라우팅 테이블을 기반으로 라우팅을 한다" 라고 배웠다.

## 라우팅 테이블

<b>라우팅 테이블은 IP 주소를 기반으로 라우터의 위치를 저장한 테이블 또는 데이터베이스이며 다양한 네트워크에 대한 정보와 해당 네트워크에 연결하는 방법이 포함되어 있다.</b>

다음 예시를 보자. PC1(10.0.0.4)이 101.25.67.0 네트워크에 있는 PC3(101.25.67.7)에 패킷을 보내려고 한다고 해보자. 이때 Router A 를 거쳐 전달되게 된다.

<img src="/assets/img/captures/fd525d98-bf65-447b-aeb3-df58ea6700ef.png" width="600px" />

현재 PC3의 IP는 101.25.67.7 이다. 이는 101.25.67.0 과 같은 네트워크이다. 물론 두 IP가 숫자가 약간 다르기는 한데, 같은 네트워크 안에 있는 IP 라고 보면 된다.

10.0.0.4 는 101.25.67.7 과 연결돼 있는데 중간에 Router A 가 있다.

라우팅 테이블의 구성요소는 다음과 같다.

<img src="/assets/img/captures/dbda33ee-94c6-408a-b8a2-4e169a8437cb.png" width="600px" />

10.0.0.4 에서 101.25.67.7 로 갈 때 그 중간에는 외부 네트워크가 있다. 여러 개의 라우터 장치가 있는 것이다. 라우팅 테이블은 네트워크 대상, 서브넷 마스크, 게이트웨이, 인터페이스, 메트릭으로 구성돼 있다. 이것들을 기반으로 라우팅을 수행하는 것이다.

- <b>네트워크 대상(Network Destination)</b> : 목적지 네트워크의 IP 주소. 101.25.67.7로 전달을 하고 싶더라도 일단 목적지는 101.25.67.7이 있는 네트워크를 기반으로 하게 된다. 그래서 이 IP가 있는 네트워크 주소인 101.25.67.0 가 네트워크 대상이 되는 것이다.
- <b>서브넷 마스크(Netmask)</b> : 대상 주소를 설명할 때 쓰이는 값
- <b>게이트웨이(Gateway)</b> : 이 장치와 연결되어 있는 홉, 패킷이 전달되는 다음 IP 주소(외부 네트워크와 연결된 장치). 만약 목적지가 로컬 네트워크라면 '연결됨(connected)'라고 표기되며 다른 네트워크라면 해당 네트워크의 게이트웨이를 가리킨다. 10.0.0.4로부터 연결된 다음 장치 중 외부 네트워크와 연결된 장치가 게이트웨이이다. 이 경우에는 10.0.0.2가 게이트웨이가 되는 것.
- <b>인터페이스(interface)</b> : 게이트웨이로 가기 위해 거치는 장치 / 10.0.0.2는 eth3를 통해서 게이트웨이에 접근이 가능.
- <b>메트릭(Metric)</b> : 우선순위라고도 불리며 패킷 전송을 위해 최적의 경로가 선택되도록 참고되는 값. 동일한 라우팅 테이블 요소가 2개 있을 때 이 값이 낮은 요소가 선택된다. 메트릭은 일반적으로 홉 수(hop count)가 들어가며 지연시간, 처리량 등이 들어갈 수 있다.

<img src="/assets/img/captures/175ba0c3-bdf5-4a2a-8d2a-58f62b1d337f.png" width="300px" />

위 그림을 보자. 라우팅은 최적의 경로를 찾는 과정이다. 장치가 두 개가 연결돼 있는데 한 장치의 메트릭(metric)은 3이고 다른 장치의 메트릭이 6이면 3이 선택되어서 간다는 것이다.

<br>
<hr>

## 게이트웨이

<b>게이트웨이는 프로토콜 변환기라고도 하며 네트워크와 네트워크를 잇는 장치이다.</b> 라우터와 하는 기능 자체가 비슷하다.

<img src="/assets/img/captures/0744db16-e068-452e-8a46-f81c48992dcb.png" width="600px" />

<br>
<hr>

## 홉

<b>홉(hop)은 네트워크에서 출발지와 목적지 사이에 위치한 장치</b>를 의미하며 <b>홉 카운트(hop count)는 데이터가 출발지와 목적지 사이에서 통과해야 하는 홉의 개수</b>를 의미한다.

<img src="/assets/img/captures/69bfe8f0-3d86-4ebf-865c-a821bef10433.png" width="900px" />

위 그림을 보자. Workstation 1 에서 Workstation 2 로 데이터를 보낸다고 했을 때 홉 수(hop count)는 두 개가 된다. 왜냐하면 두 개의 장치를 건너뛰기 때문이다.

홉은 그냥 어떤 장치이다. 내가 데이터를 어떠한 곳에서 어떠한 곳으로 보낸다고 했을 때 그 사이에 위치한 장치이고, 홉 카운트는 이 홉의 개수를 의미한다.

그러면 홉 카운트는 적은 게 좋을까, 많은 게 좋을까? 적은 게 좋다. 예를 들어 서울에서 부산으로 간다고 해보자. 여러 군데를 거쳐서 가는 것보다 직통으로 가는 것이 좋다.

<img src="/assets/img/captures/77afb5c2-7d40-48e6-882e-edb0acb71591.png" width="400px" />

그렇기 때문에 홉 카운트는 적으면 적을수록 네트워크 통신이 빨라진다. 이것이 라우팅 테이블의 메트릭에 들어가는 것이다. 일반적으로 홉 카운트가 들어가는데, 지연시간, 처리량 등도 들어갈 수 있다.

<br>
<hr>

## 라우팅 테이블 실습

윈도우 OS 기준 cmd에 ```netstat -r``` 을 입력하면 경로 테이블(라우팅 테이블)을 확인할 수 있다.

<img src="/assets/img/captures/84647b22-a91e-41f9-9044-56fcff1d3e7e.png" width="700px" />

위 그림에서 게이트웨이 부분을 보자. 멘 아래의 두 부분은 '연결됨'으로 되어 있고, 그 위에는 IP(121.32.183.254)로 되어 있다. 위 게이트웨이 설명에서 "만약 목적지가 로컬 네트워크라면 '연결됨(connected)'라고 표기 되며 다른 네트워크라면 해당 네트워크의 게이트웨이를 가리킨다." 라고 설명했었다.

또 게이트웨이로 도달하기 위한 인터페이스가 IP주소와 매우 비슷한 것을 알 수 있다.
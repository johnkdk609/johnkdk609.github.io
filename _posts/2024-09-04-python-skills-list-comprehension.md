---
layout: post
title: 파이썬 리스트 컴프리헨션 (list comprehension)
categories: Python
date: 2024-09-04 22:04:00 +0900
---
파이썬으로 알고리즘 문제를 풀다 보면 배열 복사를 하는 경우가 많이 생긴다. 주로 메서드 안에서 원본 배열을 인자로 받아서, 임시 배열에 원본 배열을 담는 경우이다.

이때 원본 배열을 복사할 수 있는 방법은 크게 세 가지가 생각난다.

1. <b>deepcopy</b>
2. <b>직접 같은 사이즈의 배열을 생성하고, 행 ~ 열 순회를 돌면서 복사</b>
3. <b>리스트 컴프리헨션</b>

<br>

이 중 리스트 컴프리헨션을 사용하여 간결하게 배열을 복사하는 것을 알아보겠다.

다음과 같이 2차원 배열이 있다고 해보자.

```python
arr2D = [
    [1, 2, 3],
    [4, 5, 6]
]
```

위 배열을 <b>리스트 컴프리헨션(list comprehension)</b>을 사용해 복사하려면 다음과 같이 하면 된다.

```python
copied2D = [row[:] for row in arr2D]
print(*copied2d, sep='\n')

# [1, 2, 3]
# [4, 5, 6]
```

<br>

매우 간결하게 복사를 할 수 있다. 사실상 한 줄의 코드로 배열의 깊은 복사(deepcopy)를 한 것이다.

3차원 배열까지는 알고리즘 문제를 풀 때 자주 등장하므로, 3차원 배열 복사에 대해서도 알아보자.

<br>

다음과 같이 3차원 배열이 있다고 해보자.

```python
arr3D = [
    [[1, 0], [2, 0], [3, 0]],
    [[4, 0], [5, 0], [6, 0]]
]
```

이때 만약 위에서 2차원 배열을 복사하듯이 그대로 해버리면 문제가 발생한다.

```python
copied3D = [row[:] for row in arr3D]
arr3D[0][1][1] = 100
print(*copied3D, sep='\n')

# [[1, 0], [2, 100], [3, 0]]
# [[4, 0], [5, 0], [6, 0]]
```

가장 안쪽의(3차원) 배열은 깊은 복사가 안 된 것이다. 복사를 한 후, 원본 배열인 arr3D 배열의 값을 변경하니 복사한 배열인 copied3D의 값도 바뀐 것을 볼 수 있다.

이것을 해결하려면 다음과 같이 하면 된다.

```python
arr3D = [
    [[1, 0], [2, 0], [3, 0]],
    [[4, 0], [5, 0], [6, 0]]
]

copied3D = [[line[:] for line in row] for row in arr3D]
```

3차원까지도 복사를 하는 것이다. 이제 완전히 깊은 복사가 이뤄졌기 때문에, 원본 배열의 값이 바뀌어도 복사한 배열의 값은 영향을 받지 않는다.